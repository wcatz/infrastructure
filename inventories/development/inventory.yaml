---
# Development/Staging Inventory
# Define your hosts for development and staging environments

all:
  children:
    kubernetes_cluster:
      children:
        control_plane:
          hosts:
            dev-k3s-master-01:
              ansible_host: 192.168.1.10
              ansible_user: ubuntu
              ansible_ssh_private_key_file: ~/.ssh/id_rsa
        
        worker_nodes:
          hosts:
            dev-k3s-worker-01:
              ansible_host: 192.168.1.11
              ansible_user: ubuntu
              ansible_ssh_private_key_file: ~/.ssh/id_rsa
            dev-k3s-worker-02:
              ansible_host: 192.168.1.12
              ansible_user: ubuntu
              ansible_ssh_private_key_file: ~/.ssh/id_rsa
      
      vars:
        k3s_version: v1.28.4+k3s1
        k3s_token: changeme_dev_token
        environment: development

    haproxy_servers:
      hosts:
        dev-haproxy-01:
          ansible_host: 192.168.1.20
          ansible_user: ubuntu
          ansible_ssh_private_key_file: ~/.ssh/id_rsa
      vars:
        haproxy_backend_servers:
          - name: dev-k3s-worker-01
            address: 192.168.1.11
            port: 80
          - name: dev-k3s-worker-02
            address: 192.168.1.12
            port: 80

  vars:
    ansible_python_interpreter: /usr/bin/python3
    tailscale_auth_key: "{{ lookup('env', 'TAILSCALE_AUTH_KEY') }}"
