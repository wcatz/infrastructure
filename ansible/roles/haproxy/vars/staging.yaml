---
# Staging environment HAProxy configuration
# Production-like settings for staging

haproxy_environment: "staging"

# Global settings for staging
haproxy_global:
  maxconn: 2048
  log_socket: /dev/log
  log_level: info
  stats_socket: /var/run/haproxy.sock
  stats_level: admin

# Default settings for staging
haproxy_defaults:
  mode: tcp
  log: global
  option_tcplog: true
  timeout_connect: 5s
  timeout_client: 60s
  timeout_server: 60s
  retries: 3

# Example TCP backends for staging
haproxy_tcp_backends:
  - name: mysql-staging
    port: 3306
    mode: tcp
    balance: roundrobin
    servers:
      - name: staging-worker-1
        address: 192.168.1.201
        port: 30306
        check: true
        check_interval: 3s
        rise: 2
        fall: 3
      - name: staging-worker-2
        address: 192.168.1.202
        port: 30306
        check: true
        check_interval: 3s
        rise: 2
        fall: 3

# Example UDP backends for staging
haproxy_udp_backends:
  - name: wireguard-staging
    port: 51820
    mode: udp
    balance: roundrobin
    servers:
      - name: staging-worker-1
        address: 192.168.1.201
        port: 31820
      - name: staging-worker-2
        address: 192.168.1.202
        port: 31820
