# Ansible Inventory Example - Hybrid K8s Cluster
#
# Architecture:
# - Control Plane (k3s_servers): Behind CGNAT, no workloads, Tailscale for communication
# - Worker Nodes (k3s_agents): Public IP (e.g., Netcup), runs workloads, Cloudflared ingress
#
# The control plane runs only the K3s server with no workloads (taints applied).
# Worker nodes handle all application workloads and ingress traffic.

[k3s_servers]
# k3s control plane node (home/CGNAT environment)
# No workloads - only runs K3s control plane
# Uses Tailscale for secure communication with workers
# k3s-control ansible_host=100.64.x.x ansible_user=ubuntu k3s_node_taint=true

[k3s_agents]
# k3s worker nodes (public IP, e.g., Netcup VPS)
# Runs all workloads and handles ingress via Cloudflared
# Uses Tailscale for secure control plane communication
# k3s-worker-01 ansible_host=x.x.x.x ansible_user=ubuntu k3s_node_label="node-role=worker"

[all:vars]
ansible_python_interpreter=/usr/bin/python3

# Tailscale configuration (required for hybrid cluster)
# Get auth key from: https://login.tailscale.com/admin/settings/keys
# tailscale_auth_key=tskey-auth-xxxxx
# tailscale_args=--accept-routes --advertise-exit-node=false
