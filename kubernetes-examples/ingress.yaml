---
# Example Ingress Configuration
#
# This Ingress routes external HTTP/HTTPS traffic to your services.
# In the hybrid cluster, configure Cloudflared to route traffic directly to services.
#
# Traffic flow:
#   Internet → Cloudflare → Cloudflared (worker) → Kubernetes Service → Pods
#
# Usage:
#   1. Deploy your application and service
#   2. Configure Cloudflared to route the hostname to your service
#
# Note: Standard Kubernetes Ingress resources are optional with Cloudflared.
# You can route directly to services via Cloudflared tunnel configuration.

# Example: Using standard Kubernetes Ingress (if needed)
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-app-ingress
  namespace: default
  labels:
    app: example-app
spec:
  rules:
    - host: app.example.com
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: example-app
                port:
                  number: 80

---
# Alternative: Path-based routing on same host
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: example-app-paths
  namespace: default
spec:
  rules:
    - host: app.example.com
      http:
        paths:
          # Route /api/* to API service
          - path: /api
            pathType: Prefix
            backend:
              service:
                name: api-service
                port:
                  number: 8080

          # Route everything else to frontend
          - path: /
            pathType: Prefix
            backend:
              service:
                name: frontend-service
                port:
                  number: 80
