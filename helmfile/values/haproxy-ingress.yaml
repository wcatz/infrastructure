# HAProxy Ingress Controller Helm Chart Values
# These values configure the HAProxy Ingress Controller

controller:
  replicaCount: 2

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

  # HAProxy-specific configuration
  config:
    # Timeout configurations
    timeout-client: "50s"
    timeout-client-fin: "50s"
    timeout-connect: "5s"
    timeout-http-request: "5s"
    timeout-keep-alive: "1m"
    timeout-queue: "5s"
    timeout-server: "50s"
    timeout-server-fin: "50s"
    timeout-tunnel: "1h"

    # Keep-alive settings
    backend-check-interval: "2s"
    forwardfor: "add"
    maxconn-server: "1000"

    # SSL/TLS settings
    ssl-redirect: "true"

  service:
    type: LoadBalancer
    externalTrafficPolicy: Local
    annotations: {}
    # For cloud providers, you can add annotations here
    # Example for AWS:
    # annotations:
    #   service.beta.kubernetes.io/aws-load-balancer-type: "nlb"
    #   service.beta.kubernetes.io/aws-load-balancer-cross-zone-load-balancing-enabled: "true"

  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80
    targetMemoryUtilizationPercentage: 80

defaultBackend:
  enabled: true
  replicaCount: 1
  resources:
    requests:
      cpu: 10m
      memory: 20Mi
    limits:
      cpu: 20m
      memory: 40Mi
