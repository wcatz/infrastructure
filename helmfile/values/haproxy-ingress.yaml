# HAProxy Ingress Controller - NodePort Configuration
# Exposes HAProxy on each node for external load balancing

controller:
  replicaCount: 2

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 200m
      memory: 256Mi

  config:
    timeout-client: "50s"
    timeout-client-fin: "50s"
    timeout-connect: "5s"
    timeout-http-request: "5s"
    timeout-keep-alive: "1m"
    timeout-queue: "5s"
    timeout-server: "50s"
    timeout-server-fin: "50s"
    timeout-tunnel: "1h"
    backend-check-interval: "2s"
    forwardfor: "add"
    maxconn-server: "1000"
    ssl-redirect: "true"

  service:
    type: NodePort
    nodePorts:
      http: 30080
      https: 30443
    externalTrafficPolicy: Local

  metrics:
    enabled: true
    serviceMonitor:
      enabled: true

  autoscaling:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilizationPercentage: 80
    targetMemoryUtilizationPercentage: 80

defaultBackend:
  enabled: true
  replicaCount: 1
  resources:
    requests:
      cpu: 10m
      memory: 20Mi
    limits:
      cpu: 20m
      memory: 40Mi
