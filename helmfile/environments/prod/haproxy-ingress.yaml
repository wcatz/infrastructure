# HAProxy Ingress Controller Values - Production Environment
# These values override the base haproxy-ingress.yaml for production environment

controller:
  # Three replicas for production (high availability)
  replicaCount: 3

  resources:
    requests:
      cpu: 200m
      memory: 256Mi
    limits:
      cpu: 500m
      memory: 512Mi

  # Production-optimized configuration
  config:
    timeout-client: "60s"
    timeout-server: "60s"
    timeout-connect: "5s"
    timeout-tunnel: "2h"  # Longer for production WebSockets
    ssl-redirect: "true"
    maxconn-server: "2000"  # Higher connection limit

  # Aggressive auto-scaling for production
  autoscaling:
    enabled: true
    minReplicas: 3
    maxReplicas: 10
    targetCPUUtilizationPercentage: 70
    targetMemoryUtilizationPercentage: 70

defaultBackend:
  enabled: true
  replicaCount: 2  # Two backend pods for redundancy
  resources:
    requests:
      cpu: 10m
      memory: 20Mi
    limits:
      cpu: 20m
      memory: 40Mi
